(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{104:function(e,t,a){e.exports={zoom:"Cars_zoom__2vehQ"}},110:function(e,t,a){e.exports=a(239)},115:function(e,t,a){},116:function(e,t,a){},238:function(e,t,a){},239:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(21),i=a.n(l),c=(a(115),a(8)),s=a(9),o=a(12),u=a(11),d=(a(116),a(247)),m=a(53),p=a.n(m),h=a(29),g=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={activeLink:"/"},e.setActiveLinkHandler=function(t){e.setState({activeLink:t})},e.setCurrentPath=function(){try{var t=window.location.href.split("/"),a="/"+t[t.length-1];console.log(a),e.setState({activeLink:a})}catch(n){console.error(n)}},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.setCurrentPath()}},{key:"render",value:function(){var e=this,t=["nav-link",p.a.Link];return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{bg:"dark",variant:"dark",expand:"lg"},r.a.createElement(d.a.Brand,{className:p.a.NavbarBrand},r.a.createElement("img",{alt:"Open-Intelligence Logo",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAACHklEQVR4Ae3WAWTjUBjA8UNRFMVQFMUwHIahCI7hMBTFUBTDYQiG4RAUBRSHAIaiKIrhAFAURVAURREERVAMRe+PfTzP+faSJsy2Pz9M0rcvSdPk26foq+PxeIkBZlhi+2qOKR5xXvYQVfiI4doa/TKG6WCDvEXwihpmALsdntBFG61XHnqYYA+zA+5OGaSCKcwS3KPieIkDpDAb5h1oCLNn1HOs08QCZndZF7mF2QiVE2+IqXX5vCwfTiDNCrxLF5Ai1w8GkLaoFXi3NpFC6r99FMoH+PsBEUK0lHW+Y4IF+soBr98a6BrSxtrWhlmorPMX0gFN66D3kM61gUJIQ2ubD7OVsk4Ks661fQLpURtoCcmztjVwgPSgrPMH0g5Va3sP0lQbKIYkp9keykfb4Qv8E79Q/882D9JcW4SISn5QtyBt38NATUixtmMCqVHiQG1IC23HCNJViQN1Ic20HZ8gBcoPWtZ6+v/RX8SkyNpWR4ysLezXGuwgXWoD1fAC6ca+XbGHawkurDXuIcUu13cEaYWK/YLveKbWaNlnGQkk32WgOlJIofLCn8Auxm9U7UuFZ0gb/R1Lf275yr5n8PADFw5nXupkvTXHMAv1I1K/lzOYBXnf8OYwW+Emwxp9bGE2OfW1cwy7CAGu0LAeCR6G2MBuUNQvq48UeUtwW/TP/RlGeIFrKQJUy3xS19DBGBF2kGIsEeJaBvnqQ/cPDxGlXpRi3oIAAAAASUVORK5CYII=",width:"36",height:"36",className:"d-inline-block align-top"})," ",r.a.createElement("span",{className:p.a.NavbarBrand},"Open-Intelligence")),r.a.createElement(d.a.Toggle,{"aria-controls":"navbarSupportedContent"}),r.a.createElement(d.a.Collapse,{id:"navbarSupportedContent"},"/"!==this.state.activeLink?r.a.createElement(h.b,{className:t.join(" "),to:"/",onClick:function(){return e.setActiveLinkHandler("/")}},"Home"):r.a.createElement("span",null,"Home"),"/cameras"!==this.state.activeLink?r.a.createElement(h.b,{className:t.join(" "),to:"/cameras",onClick:function(){return e.setActiveLinkHandler("/cameras")}},"Cameras"):r.a.createElement("span",null,"Cameras"),"/plates"!==this.state.activeLink?r.a.createElement(h.b,{className:t.join(" "),to:"/plates",onClick:function(){return e.setActiveLinkHandler("/plates")}},"Plates"):r.a.createElement("span",null,"Plates"),"/faces"!==this.state.activeLink?r.a.createElement(h.b,{className:t.join(" "),to:"/faces",onClick:function(){return e.setActiveLinkHandler("/faces")}},"Faces"):r.a.createElement("span",null,"Faces"),"/training"!==this.state.activeLink?r.a.createElement(h.b,{className:t.join(" "),to:"/training",onClick:function(){return e.setActiveLinkHandler("/training")}},"Training"):r.a.createElement("span",null,"Training"))))}}]),a}(n.Component),f=a(14),v=a(95),E=a.n(v),b=function(){return localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),localStorage.removeItem("userId"),{type:"AUTH_LOGOUT"}},D=function(){return function(e){var t,a=localStorage.getItem("token");if(a){var n=new Date(localStorage.getItem("expirationDate"));if(n<=new Date)e(b());else e(function(e,t){return{type:"AUTH_SUCCESS",idToken:e,userId:t}}(a,0|Number(localStorage.getItem("userId")))),e((t=(n.getTime()-(new Date).getTime())/1e3,function(e){setTimeout((function(){e(b())}),1e3*t)}))}else e(b())}},w=a(16),y=a(97),k=a.n(y).a.create({}),I="http://192.168.2.35:4300/",x=I+"manage/licence/plates",N=a(241),O=a(98),C=a.n(O),S=function(e){return r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{style:{width:"64px",height:"64px"},className:"text-center"},r.a.createElement(N.a,{style:{width:"32px",height:"32px"},animation:"grow",variant:e.isDark?"dark":"light",className:C.a.SpinnerDiv})))},j=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e))._isMounted=void 0,n.state={windowWidth:window.innerWidth,imageData:[],intervalId:0,isLoading:!0},n.loadCameraImages=function(){k.post("http://192.168.2.35:4300/get/latest/camera/images").then((function(e){n._isMounted&&n.setState({imageData:e.data.images,isLoading:!1})})).catch((function(e){console.error(e)}))},n.handleResize=function(){n.setState({windowWidth:window.innerWidth})},n._isMounted=!1,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,window.addEventListener("resize",this.handleResize),this.loadCameraImages();var t=setInterval((function(){return e.loadCameraImages()}),6e4);this.setState({intervalId:t})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.intervalId),this._isMounted=!1,window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e=[r.a.createElement("div",{key:"null"})],t=this.state.windowWidth/2,a=50*t/100;return void 0!==this.state.imageData&&this.state.imageData.length>0&&(e=this.state.imageData.map((function(e){return r.a.createElement("img",{id:e.id,title:e.name+" "+new Date(e.file_create_date).toDateString(),className:"CursorPointer magictime vanishIn",style:{width:t,height:a},key:e.id,src:e.image,alt:e.file_name})}))),r.a.createElement("div",null,r.a.createElement("div",{className:["d-flex","justify-content-center","flex-wrap"].join(" ")},e),this.state.isLoading?r.a.createElement(S,null):null)}}]),a}(n.Component),M=a(3),R=a.n(M),H=a(5),A=a(248),L=a(242);function _(e){return P.apply(this,arguments)}function P(){return(P=Object(H.a)(R.a.mark((function e(t){var a,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.next=3,k.post("http://192.168.2.35:4300/get/object/detection/image/for/cropped/image",{croppedImageName:t});case 3:return n=e.sent,a.file_name=n.data.file_name,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return F.apply(this,arguments)}function F(){return(F=Object(H.a)(R.a.mark((function e(t){var a,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a={}).file_name=t,e.next=4,k.post("http://192.168.2.35:4300/get/object/detection/image",{objectDetectionImageFileName:t});case 4:return n=e.sent,a.data=n.data.data,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return G.apply(this,arguments)}function G(){return(G=Object(H.a)(R.a.mark((function e(t){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.post("http://192.168.2.35:4300/get/intelligence",{selectedDate:t});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e,t){return W.apply(this,arguments)}function W(){return(W=Object(H.a)(R.a.mark((function e(t,a){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.post("http://192.168.2.35:4300/get/label/images",{selectedDate:t,label:a});case 2:return n=e.sent,e.abrupt("return",n.data.images);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e,t){return Q.apply(this,arguments)}function Q(){return(Q=Object(H.a)(R.a.mark((function e(t,a){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.post("http://192.168.2.35:4300/get/super/resolution/image",{label:t,imageFile:a});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return Y.apply(this,arguments)}function Y(){return(Y=Object(H.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.get("http://192.168.2.35:4300/get/instance/details");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e,t){return K.apply(this,arguments)}function K(){return(K=Object(H.a)(R.a.mark((function e(t,a){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.post("http://192.168.2.35:4300/get/calendar/events",{dateRangeStartDate:t,dateRangeEndDate:a});case 2:return n=e.sent,e.abrupt("return",n.data.events);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return q.apply(this,arguments)}function q(){return(q=Object(H.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.get("http://192.168.2.35:4300/get/licence/plates");case 2:return t=e.sent,e.abrupt("return",t.data.plates);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,t,a){return $.apply(this,arguments)}function $(){return($=Object(H.a)(R.a.mark((function e(t,a,n){var r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.post(x,{licence_plate:t,owner_name:a,data_id:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return(te=Object(H.a)(R.a.mark((function e(t){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.delete(x+"/"+t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e,t,a){return ne.apply(this,arguments)}function ne(){return(ne=Object(H.a)(R.a.mark((function e(t,a,n){var r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.put(x,{id:t,licence_plate:a,owner_name:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e,t,a){return le.apply(this,arguments)}function le(){return(le=Object(H.a)(R.a.mark((function e(t,a,n){var r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.post("http://192.168.2.35:4300/get/license/plate/detections",{resultOption:t,selectedDateStart:a,selectedDateEnd:n});case 2:return r=e.sent,e.abrupt("return",r.data.licensePlates);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(){return ce.apply(this,arguments)}function ce(){return(ce=Object(H.a)(R.a.mark((function e(){var t,a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.get("http://192.168.2.35:4300/get/face/grouping/images");case 2:return t=e.sent,(a={}).names=t.data.names,a.images=t.data.images,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e,t){return oe.apply(this,arguments)}function oe(){return(oe=Object(H.a)(R.a.mark((function e(t,a){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.post("http://192.168.2.35:4300/move/face/grouping/image",{name:t,rectFileName:a});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){return de.apply(this,arguments)}function de(){return(de=Object(H.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.get("http://192.168.2.35:4300/train/face/model");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var me=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={instances:[]},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.loadInstanceDetails().then((function(){return null}))}},{key:"loadInstanceDetails",value:function(){var e=Object(H.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:t=e.sent,this.setState({instances:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=[];return void 0!==this.state.instances&&this.state.instances.length>0&&(e=this.state.instances.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.process_name),r.a.createElement("td",null,e.updatedAt),r.a.createElement("td",null,e.createdAt))}))),r.a.createElement("div",null,r.a.createElement(A.a,{bg:"dark",text:"light"},r.a.createElement(A.a.Header,null,"Running instances"),r.a.createElement(A.a.Body,{style:{padding:"0px"}},r.a.createElement("div",{className:"table-responsive"},r.a.createElement(L.a,{striped:!0,bordered:!0,hover:!0,variant:"dark",style:{minWidth:"650px"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Process"),r.a.createElement("th",null,"Alive check"),r.a.createElement("th",null,"Started"))),r.a.createElement("tbody",null,e))))))}}]),a}(n.Component),pe=a(243),he=a(99),ge=a(246),fe=a(249),ve=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.a,{size:"lg",show:e.show,onHide:e.closeHandler()},r.a.createElement(ge.a.Header,{closeButton:!0},r.a.createElement(ge.a.Title,null,r.a.createElement("h5",null,e.title))),r.a.createElement(ge.a.Body,null,r.a.createElement("p",{className:"text-muted mb-2"},e.description),e.showBadges?r.a.createElement("div",{className:"d-flex flex-row bd-highlight mb-2"},r.a.createElement("div",{className:"bd-highlight"},r.a.createElement("span",{className:"badge badge-warning"},e.srImage?"SR version":"Normal version")),r.a.createElement("div",{className:"ml-2 bd-highlight"},r.a.createElement("span",{className:"badge badge-info"},e.detectionResult)),r.a.createElement("div",{className:"ml-2 bd-highlight"},r.a.createElement("span",{className:"badge badge-secondary"},e.color)),r.a.createElement("div",{className:"ml-2 bd-highlight"},r.a.createElement("span",{className:"badge badge-dark"},e.additionalInfo))):null,r.a.createElement("img",{className:"card-img-right",style:{width:"100%",height:"100%"},alt:"genericModalImage",src:e.src})),r.a.createElement(ge.a.Footer,null,r.a.createElement(fe.a,{variant:"secondary",onClick:e.closeHandler()},"Close"))))},Ee=null,be=!1,De=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={selectedDate:null,isLoading:!0,labelSelection:null,instanceCount:0,storageUse:"N/A GB",labelDonutData:{},labelImages:[],genericImageModalData:{show:!1}},e.onDonutElementClickHandler=function(t){if(void 0!==t&&t.length>0){var a=t[0]._index,n=e.state.labelDonutData.labels[a];e.setState({isLoading:!0,labelSelection:n}),e.loadLabelImagesHandler(e.props.selectedDate,n).then((function(){return null}))}},e.genericImageModalCloseHandler=function(){e.setState({genericImageModalData:{show:!1}})},e.handleLabelMouseDown=function(t){Ee=setTimeout((function(){console.log("Mouse long click run"),e.labelImageClickHandler(t,!0).then((function(){return null})),be=!0}),1e3)},e.handleLabelMouseUp=function(t){clearTimeout(Ee),be||(console.log("Mouse short click run"),e.labelImageClickHandler(t,!1).then((function(){return null}))),be=!1},e}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){this.state.selectedDate!==this.props.selectedDate&&this.loadIntelligence(this.props.selectedDate).then((function(){return null}))}},{key:"componentDidMount",value:function(){this.loadIntelligence(this.props.selectedDate).then((function(){return null}))}},{key:"loadIntelligence",value:function(){var e=Object(H.a)(R.a.mark((function e(t){var a,n,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t);case 2:a=e.sent,(n={}).labels=[],n.datasets=[],r={data:[],backgroundColor:[],hoverBackgroundColor:[]},a.donut.forEach((function(e){n.labels.push(e.label),r.data.push(e.value),r.backgroundColor.push("#13697d"),r.hoverBackgroundColor.push("#1698af")})),n.datasets.push(r),this.setState({selectedDate:t,isLoading:!1,instanceCount:a.performance.instanceCount,storageUse:a.performance.storageUse,labelDonutData:n});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadLabelImagesHandler",value:function(){var e=Object(H.a)(R.a.mark((function e(t,a){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(t,a);case 2:n=e.sent,this.setState({isLoading:!1,labelImages:n});case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"labelImageClickHandler",value:function(){var e=Object(H.a)(R.a.mark((function e(t,a){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({isLoading:!0}),a?this.loadObjectDetectionImageHandler(t).then((function(){return null})):this.loadSuperResolutionImage(t).then((function(){return null}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"loadObjectDetectionImageHandler",value:function(){var e=Object(H.a)(R.a.mark((function e(t){var a,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.next=3,_(t);case 3:return a=e.sent,e.next=6,T(a.file_name);case 6:n=e.sent,this.setState({isLoading:!1,genericImageModalData:{show:!0,title:n.file_name,description:"Full object detection image for selected label where label is originating",src:n.data}});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadSuperResolutionImage",value:function(){var e=Object(H.a)(R.a.mark((function e(t){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.next=3,z(this.state.labelSelection||"",t);case 3:a=e.sent,this.setState({isLoading:!1,genericImageModalData:{show:!0,title:t,description:a.srImage?"This is processed super resolution image":"This is standard image",src:a.data,showBadges:!0,srImage:a.srImage,detectionResult:a.detectionResult,color:a.color}});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];return void 0!==this.state.labelImages&&this.state.labelImages.length>0&&(t=this.state.labelImages.map((function(t){return r.a.createElement("div",{onMouseDown:function(){return e.handleLabelMouseDown(t.file)},onMouseUp:function(){return e.handleLabelMouseUp(t.file)},key:t.file},r.a.createElement("img",{id:t.file,title:t.title,className:"CursorPointer mr-1 ml-1 mt-1 magictime vanishIn",style:{maxHeight:"120px",maxWidth:"120px",width:"auto",height:"auto"},key:t.file,src:t.image,alt:t.file}))}))),r.a.createElement("div",null,r.a.createElement(A.a,{bg:"Light",text:"dark"},r.a.createElement(A.a.Header,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement("b",null,"Label viewer")),r.a.createElement("div",{className:"col-sm text-right"},r.a.createElement(pe.a,{variant:"dark",className:"mr-2"},"IC",this.state.instanceCount),r.a.createElement(pe.a,{variant:"dark"},"STR ",this.state.storageUse)))),r.a.createElement(A.a.Body,null,r.a.createElement("div",{style:{height:"300px"}},void 0!==this.state.labelDonutData.datasets?r.a.createElement(he.Doughnut,{onElementsClick:function(t){return e.onDonutElementClickHandler(t)},data:this.state.labelDonutData,height:300,options:{maintainAspectRatio:!1}}):this.state.isLoading?r.a.createElement(S,{isDark:!0}):null),r.a.createElement("div",{className:"d-flex justify-content-center flex-wrap mt-4"},t)),r.a.createElement(A.a.Footer,null,r.a.createElement("small",{className:"text-muted"},null===this.state.labelSelection?"No label selected":"Selected "+this.state.labelSelection+" label"))),this.state.isLoading?r.a.createElement(S,{isDark:!1}):null,r.a.createElement(ve,{closeHandler:function(){return e.genericImageModalCloseHandler},show:this.state.genericImageModalData.show,description:this.state.genericImageModalData.description,src:this.state.genericImageModalData.src,title:this.state.genericImageModalData.title,showBadges:this.state.genericImageModalData.showBadges,srImage:this.state.genericImageModalData.srImage,detectionResult:this.state.genericImageModalData.detectionResult,color:this.state.genericImageModalData.color,additionalInfo:this.state.genericImageModalData.additionalInfo}))}}]),a}(n.Component),we=Object(w.b)((function(e){return{selectedDate:e.dateReducer.selectedDate}}))(De),ye=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:""},r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},"Selected day")),r.a.createElement("input",{id:"selected_day_field",type:"date",className:"form-control",placeholder:"Change day","aria-label":"Day change",value:this.props.selectedDate,onChange:function(t){return e.props.onDateSelected(t)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-outline-info",type:"button",onClick:this.props.onDecrementDay},"\u2190 Earlier"),r.a.createElement("button",{className:"btn btn-outline-info",type:"button",onClick:this.props.onIncrementDay},"Next \u2192")))))}}]),a}(n.Component),ke=Object(w.b)((function(e){return{selectedDate:e.dateReducer.selectedDate}}),(function(e){return{onIncrementDay:function(){return e({type:"INCREMENT_DAY",days:1})},onDecrementDay:function(){return e({type:"DECREMENT_DAY",days:-1})},onDateSelected:function(t){return e({type:"CALENDAR_SELECTION",calendar:t})}}}))(ye),Ie=a(107),xe=a(51),Ne=a(108),Oe=a(109),Ce=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},"Day's between")),r.a.createElement("input",{type:"date",className:"form-control",placeholder:"Change day","aria-label":"Day change",value:this.props.dateRangeStartDate,onChange:function(t){return e.props.onDateRangeStartDateSelected(t)}}),r.a.createElement("input",{type:"date",className:"form-control",placeholder:"Change day","aria-label":"Day change",value:this.props.dateRangeEndDate,onChange:function(t){return e.props.onDateRangeEndDateSelected(t)}})))}}]),a}(n.Component),Se=Object(w.b)((function(e){return{dateRangeStartDate:e.dateReducer.dateRangeStartDate,dateRangeEndDate:e.dateReducer.dateRangeEndDate}}),(function(e){return{onDateRangeStartDateSelected:function(t){return e({type:"DATE_RANGE_START_DATE_SELECTED",calendar:t})},onDateRangeEndDateSelected:function(t){return e({type:"DATE_RANGE_END_DATE_SELECTED",calendar:t})}}}))(Ce),je=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).state={dateRangeStartDate:null,dateRangeEndDate:null,calendarWeekends:!0,calendarEvents:[],genericImageModalData:{show:!1}},e.calendarComponentRef=r.a.createRef(),e.handleDateClick=function(e){},e.handleEventClick=function(t){var a=t.event.title,n=t.event.extendedProps.file_name_cropped,r=t.event.extendedProps.description;e.loadObjectDetectionImageHandler(n,a,r).then((function(){return null}))},e.genericImageModalCloseHandler=function(){e.setState({genericImageModalData:{show:!1}})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.loadCalendarEvents().then((function(){return null}))}},{key:"componentDidUpdate",value:function(e,t,a){this.state.dateRangeStartDate===this.props.dateRangeStartDate&&this.state.dateRangeEndDate===this.props.dateRangeEndDate||this.loadCalendarEvents().then((function(){return null}))}},{key:"loadCalendarEvents",value:function(){var e=Object(H.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(this.props.dateRangeStartDate,this.props.dateRangeEndDate);case 2:t=e.sent,this.setState({calendarEvents:t,dateRangeStartDate:this.props.dateRangeStartDate,dateRangeEndDate:this.props.dateRangeEndDate});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(A.a,{bg:"Light",text:"dark"},r.a.createElement(A.a.Header,null,r.a.createElement("b",null,"Vehicle activity")),r.a.createElement(A.a.Body,null,r.a.createElement("div",null,r.a.createElement(Se,this.props),r.a.createElement(Ie.a,{plugins:[xe.b,Ne.a,Oe.a],ref:this.calendarComponentRef,weekends:this.state.calendarWeekends,events:this.state.calendarEvents,dateClick:this.handleDateClick,eventClick:this.handleEventClick,headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},initialView:"timeGridWeek",height:600})))),r.a.createElement(ve,{closeHandler:function(){return e.genericImageModalCloseHandler},show:this.state.genericImageModalData.show,description:this.state.genericImageModalData.description,src:this.state.genericImageModalData.src,title:this.state.genericImageModalData.title,showBadges:this.state.genericImageModalData.showBadges,srImage:this.state.genericImageModalData.srImage,detectionResult:this.state.genericImageModalData.detectionResult,color:this.state.genericImageModalData.color,additionalInfo:this.state.genericImageModalData.additionalInfo}))}},{key:"loadObjectDetectionImageHandler",value:function(){var e=Object(H.a)(R.a.mark((function e(t,a,n){var r,l;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.next=3,_(t);case 3:return r=e.sent,e.next=6,T(r.file_name);case 6:l=e.sent,this.setState({isLoading:!1,genericImageModalData:{show:!0,title:l.file_name,description:"Original image file where selected calendar event license plate is seen",src:l.data,showBadges:!0,detectionResult:a,additionalInfo:n}});case 8:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()}]),a}(n.Component),Me=Object(w.b)((function(e){return{dateRangeStartDate:e.dateReducer.dateRangeStartDate,dateRangeEndDate:e.dateReducer.dateRangeEndDate}}))(je),Re=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"mt-2 mr-2 ml-2"},r.a.createElement(ke,this.props)),r.a.createElement("div",{className:"mt-2 mr-2 ml-2"},r.a.createElement(we,this.props)),r.a.createElement("div",{className:"mt-2 mr-2 ml-2"},r.a.createElement(Me,this.props)),r.a.createElement("div",{className:"mt-2 mr-2 ml-2"},r.a.createElement(me,null)))}}]),a}(n.Component),He=Object(w.b)((function(e){return{selectedDate:e.dateReducer.selectedDate}}))(Re),Ae=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e))._isMounted=void 0,n.state={selectedDay:(new Date).toISOString().substr(0,10),faceImages:[],intervalId:0,genericImageModalData:{show:!1},isLoading:!0},n.loadEarlierDayHandler=function(){var e=new Date(n.state.selectedDay);e.setDate(e.getDate()-1);var t=e.toISOString().substr(0,10);n.setSelectedDay(t)},n.loadNextDayHandler=function(){var e=new Date(n.state.selectedDay);e.setDate(e.getDate()+1);var t=e.toISOString().substr(0,10);n.setSelectedDay(t)},n.setSelectedDay=function(e){n.setState({selectedDay:e}),n.loadFaceImages(e)},n.loadFaceImages=function(e){k.post("http://192.168.2.35:4300/get/faces/for/day",{selectedDate:e}).then((function(e){n._isMounted&&n.setState({faceImages:n.removeDuplicates(e.data.images),isLoading:!1})})).catch((function(e){console.error(e)}))},n.removeDuplicates=function(e){return e.filter((function(e,t,a){return a.findIndex((function(t){return t.file===e.file}))===t}))},n.genericImageModalCloseHandler=function(){n.setState({genericImageModalData:{show:!1}})},n._isMounted=!1,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.loadFaceImages(this.state.selectedDay);var t=setInterval((function(){return e.loadFaceImages(e.state.selectedDay)}),6e4);this.setState({intervalId:t})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.intervalId),this._isMounted=!1}},{key:"loadObjectDetectionImageHandler",value:function(){var e=Object(H.a)(R.a.mark((function e(t){var a,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.next=3,_(t);case 3:return a=e.sent,e.next=6,T(a.file_name);case 6:n=e.sent,this.setState({isLoading:!1,genericImageModalData:{show:!0,title:n.file_name,description:"Original image file where face is detected",src:n.data,showBadges:!1}});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];return void 0!==this.state.faceImages&&this.state.faceImages.length>0&&(t=this.state.faceImages.map((function(t){return r.a.createElement("img",{id:t.file,title:t.title,className:"CursorPointer mr-1 ml-1 mt-1 magictime spaceInLeft",style:{maxHeight:"120px",maxWidth:"120px"},key:t.file,src:t.image,alt:t.file,onClick:Object(H.a)(R.a.mark((function a(){return R.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.loadObjectDetectionImageHandler(t.file);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a)})))})}))),r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex justify-content-center flex-wrap mb-2 magictime spaceInLeft"},r.a.createElement("div",{className:"input-group mb-2",style:{maxWidth:"300px"}},r.a.createElement("input",{type:"text",style:{backgroundColor:"#343a40",color:"#999999"},disabled:!0,className:"form-control",value:this.state.selectedDay}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-outline-info",type:"button",onClick:this.loadEarlierDayHandler},"\u2190 Earlier"),r.a.createElement("button",{className:"btn btn-outline-info",type:"button",onClick:this.loadNextDayHandler},"Next \u2192")))),r.a.createElement("div",{className:"d-flex justify-content-center flex-wrap"},t),r.a.createElement(ve,{closeHandler:function(){return e.genericImageModalCloseHandler},show:this.state.genericImageModalData.show,description:this.state.genericImageModalData.description,src:this.state.genericImageModalData.src,title:this.state.genericImageModalData.title,showBadges:this.state.genericImageModalData.showBadges,srImage:this.state.genericImageModalData.srImage,detectionResult:this.state.genericImageModalData.detectionResult,color:this.state.genericImageModalData.color,additionalInfo:this.state.genericImageModalData.additionalInfo}),this.state.isLoading?r.a.createElement(S,{isDark:!1}):null)}}]),a}(n.Component),Le=a(13),_e=function(){return(new Date).toISOString().substr(0,10)},Pe=function(e,t){var a=new Date(e);return a.setDate(a.getDate()+t),a.toISOString().substr(0,10)},Te=a(104),Fe=a.n(Te),Be=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.a,{size:"lg",show:e.show,onHide:e.closeHandler()},r.a.createElement(ge.a.Header,{closeButton:!0},r.a.createElement(ge.a.Title,null,r.a.createElement("h5",null,e.title))),r.a.createElement(ge.a.Body,null,r.a.createElement("p",{className:"text-muted mb-2"},e.description),void 0!==e.imageData?r.a.createElement("img",{src:e.imageData,alt:e.title}):null,r.a.createElement("form",{className:"mt-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"new_plate_licence_plate"},"Licence plate"),r.a.createElement("input",{type:"text",className:"form-control",defaultValue:e.licencePlate,onChange:function(t){return e.lpOnChange(t.target.value)}}),r.a.createElement("small",{className:"form-text text-muted"},"Input without lines, example ABC123")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"new_plate_owner_name"},"Owner name"),r.a.createElement("input",{type:"text",className:"form-control",defaultValue:e.ownerName,onChange:function(t){return e.ownerOnChange(t.target.value)}}),r.a.createElement("small",{className:"form-text text-muted"},"Give full owner name")))),r.a.createElement(ge.a.Footer,null,r.a.createElement(fe.a,{variant:"primary",onClick:function(){return e.saveHandler(e)}},"Save"),r.a.createElement(fe.a,{variant:"secondary",onClick:e.closeHandler()},"Close"))))},Ge=function(e){return e.replace("-","").replace(" ","")},Ue=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={isLoading:!1,today:_e(),resultOption:"owner_detail_needed",totalPlates:0,licensePlateDetections:[],plateEditModalData:{show:!1},dateRangeStartDate:null,dateRangeEndDate:null},e.plateEditModalCloseHandler=function(){e.setState({plateEditModalData:{show:!1}})},e.plateEditModalSaveHandler=function(t){Z(t.licencePlate,t.ownerName,Number(t.id)).then((function(t){e.plateEditModalCloseHandler()})).catch((function(t){alert(t.response.data),e.plateEditModalCloseHandler()})).finally((function(){e.setState({licensePlateDetections:e.state.licensePlateDetections.filter((function(e){return String(e.id)!==t.id}))})}))},e.addNewPlateHandler=function(t){e.setState({plateEditModalData:{show:!0,title:"Add new plate",description:'Add new plate based on pre detection. Correct the plate based on image. License plate can be given with or without "-" character.',id:String(t.id),licencePlate:t.detectionResult,ownerName:"",imageData:t.image}})},e}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){this.state.dateRangeStartDate===this.props.dateRangeStartDate&&this.state.dateRangeEndDate===this.props.dateRangeEndDate||(console.log("component update event"),this.loadLicensePlateDetections(this.props.dateRangeStartDate,this.props.dateRangeEndDate).then((function(){return null})))}},{key:"componentDidMount",value:function(){this.loadLicensePlateDetections(this.state.today,this.state.today).then((function(){return null}))}},{key:"loadLicensePlateDetections",value:function(){var e=Object(H.a)(R.a.mark((function e(t,a){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(this.state.resultOption,t,a);case 2:n=e.sent,this.setState({dateRangeStartDate:t,dateRangeEndDate:a,licensePlateDetections:n});case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];return void 0!==this.state.licensePlateDetections&&this.state.licensePlateDetections.length>0&&(t=this.state.licensePlateDetections.map((function(t){return r.a.createElement("div",{key:t.file,className:Fe.a.zoom,style:{cursor:"pointer"},onClick:function(){return e.addNewPlateHandler(t)}},r.a.createElement(A.a,{style:{maxWidth:"160px"},className:"mr-1 mt-1 ml-1 mb-1"},r.a.createElement(A.a.Img,{variant:"top",src:t.image,style:{maxHeight:"100px"}}),r.a.createElement(A.a.Body,{className:"p-2"},r.a.createElement(A.a.Title,{className:"m-0"},t.detectionResult)),r.a.createElement(A.a.Footer,{className:"p-2"},r.a.createElement("small",{className:"text-muted"},t.title))))}))),r.a.createElement("div",null,r.a.createElement("div",{className:"magictime vanishIn"},r.a.createElement(A.a,{bg:"Light",text:"dark"},r.a.createElement(A.a.Header,null,r.a.createElement("b",null,"Unknown cars")),r.a.createElement(A.a.Body,{style:{padding:"0px"}},r.a.createElement("small",{className:"ml-2"},"By default only cars from today are loaded. Pick day range to load more."),r.a.createElement(Se,this.props),r.a.createElement("div",{className:"d-flex justify-content-center flex-wrap"},t)),r.a.createElement(A.a.Footer,null,r.a.createElement("small",{className:"text-muted"},"This view shows you cars which require your attention")))),r.a.createElement(Be,{show:this.state.plateEditModalData.show,title:this.state.plateEditModalData.title,description:this.state.plateEditModalData.description,id:this.state.plateEditModalData.id,licencePlate:this.state.plateEditModalData.licencePlate,ownerName:this.state.plateEditModalData.ownerName,closeHandler:function(){return e.plateEditModalCloseHandler},saveHandler:function(t){return e.plateEditModalSaveHandler(t)},lpOnChange:function(t){return e.setState({plateEditModalData:Object(Le.a)(Object(Le.a)({},e.state.plateEditModalData),{},{licencePlate:Ge(t)})})},ownerOnChange:function(t){return e.setState({plateEditModalData:Object(Le.a)(Object(Le.a)({},e.state.plateEditModalData),{},{ownerName:t})})},imageData:this.state.plateEditModalData.imageData}))}}]),a}(n.Component),We=Object(w.b)((function(e){return{dateRangeStartDate:e.dateReducer.dateRangeStartDate,dateRangeEndDate:e.dateReducer.dateRangeEndDate}}))(Ue),ze=a(244),Qe=a(245),Ve=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={totalPlates:0,licensePlates:[],filteredLicensePlates:[],plateEditModalData:{show:!1}},e.onSearchFilterChangeHandler=function(t){var a=String(t.target.value).toLowerCase(),n=e.state.licensePlates.slice();e.setState({filteredLicensePlates:n.filter((function(e){return String(e.licence_plate).toLowerCase().includes(a)||String(e.owner_name).toLowerCase().includes(a)}))})},e.addNewPlateHandler=function(){e.setState({plateEditModalData:{show:!0,title:"Add new plate",description:'Give new license plate and owner details. License plate can be given with or without "-" character.',id:null,licencePlate:"",ownerName:""}})},e.editPlateHandler=function(t,a,n){e.setState({plateEditModalData:{show:!0,title:"Edit existing plate",description:'You are editing existing license plate item. License plate can be given with or without "-" character.',id:t,licencePlate:a,ownerName:n}})},e.plateEditModalCloseHandler=function(){e.setState({plateEditModalData:{show:!1}})},e.plateEditModalSaveHandler=function(t){null===t.id?Z(t.licencePlate,t.ownerName,0).then((function(t){e.loadLicensePlates().then((function(){return null})),e.plateEditModalCloseHandler()})).catch((function(e){alert(e)})):ae(t.id,t.licencePlate,t.ownerName).then((function(t){e.loadLicensePlates().then((function(){return null})),e.plateEditModalCloseHandler()})).catch((function(e){alert(e)}))},e.plateRemoveHandler=function(t,a){confirm("Delete "+a)&&ee(t).then((function(t){e.loadLicensePlates().then((function(){return null}))})).catch((function(e){alert(e)}))},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.loadLicensePlates().then((function(){return null}))}},{key:"loadLicensePlates",value:function(){var e=Object(H.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:t=e.sent,this.setState({totalPlates:t.length,licensePlates:t,filteredLicensePlates:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];return void 0!==this.state.filteredLicensePlates&&this.state.filteredLicensePlates.length>0&&(t=this.state.filteredLicensePlates.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.licence_plate),r.a.createElement("td",null,t.owner_name),r.a.createElement("td",null,r.a.createElement(ze.a,null,r.a.createElement(Qe.a,null,r.a.createElement(fe.a,{variant:"dark",size:"sm",className:"mr-2",onClick:function(){return e.editPlateHandler(t.id,t.licence_plate,t.owner_name)}},"Edit"),r.a.createElement(fe.a,{variant:"outline-danger",size:"sm",onClick:function(){return e.plateRemoveHandler(t.id,t.licence_plate)}},"Remove")))))}))),r.a.createElement("div",{className:"magictime vanishIn"},r.a.createElement(A.a,{bg:"Light",text:"dark"},r.a.createElement(A.a.Header,null,r.a.createElement("b",null,"Vehicle owners")),r.a.createElement(A.a.Body,{style:{padding:"0px"}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement("input",{type:"text",className:"form-control mt-2 mb-2",placeholder:"Search filter...","aria-label":"Search",onChange:function(t){return e.onSearchFilterChangeHandler(t)}})),r.a.createElement("div",{className:"col-sm-auto"},r.a.createElement("div",null,r.a.createElement(fe.a,{variant:"info",className:"mt-2 mr-2",onClick:this.addNewPlateHandler},"Add plate")))),r.a.createElement("div",{className:"table-responsive"},r.a.createElement(L.a,{striped:!0,bordered:!0,hover:!0,variant:"light",size:"sm",style:{minWidth:"650px"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Plate"),r.a.createElement("th",null,"Owner"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,t)))),r.a.createElement(A.a.Footer,null,r.a.createElement("small",{className:"text-muted"},"Vehicle count: ",this.state.totalPlates))),r.a.createElement(Be,{show:this.state.plateEditModalData.show,title:this.state.plateEditModalData.title,description:this.state.plateEditModalData.description,id:this.state.plateEditModalData.id,licencePlate:this.state.plateEditModalData.licencePlate,ownerName:this.state.plateEditModalData.ownerName,closeHandler:function(){return e.plateEditModalCloseHandler},saveHandler:function(t){return e.plateEditModalSaveHandler(t)},lpOnChange:function(t){return e.setState({plateEditModalData:Object(Le.a)(Object(Le.a)({},e.state.plateEditModalData),{},{licencePlate:Ge(t)})})},ownerOnChange:function(t){return e.setState({plateEditModalData:Object(Le.a)(Object(Le.a)({},e.state.plateEditModalData),{},{ownerName:t})})},imageData:void 0}))}}]),a}(n.Component),Ye=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"mt-2 mr-2 ml-2"},r.a.createElement(We,this.props)),r.a.createElement("div",{className:"mt-2 mr-2 ml-2"},r.a.createElement(Ve,this.props)))}}]),a}(n.Component),Xe=Object(w.b)((function(e){return{}}))(Ye),Ke=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"magictime vanishIn"},r.a.createElement(A.a,{bg:"Light",text:"dark"},r.a.createElement(A.a.Header,null,r.a.createElement("b",null,"Plate training")),r.a.createElement(A.a.Body,{style:{padding:"5px"}},r.a.createElement("small",{className:"mb-4"},"Plate training is only available as old jQuery version. Navigate there using button below."),r.a.createElement("div",{className:"mt-2"},r.a.createElement(fe.a,{variant:"dark",onClick:function(){return window.open("/plate-training.html","_blank")}},"Open plate training"))))))}}]),a}(n.Component),Je=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={isLoading:!0,faceGroupingNames:[],faceGroupingImages:[],loadedFile:"",showNames:!1},e.faceGroupingFaceImageClickHandler=function(t){e.setState({loadedFile:t,showNames:!0})},e.loadMoreHandler=function(){e.setState({isLoading:!0}),e.loadFaceGroupingImages().then((function(){return null}))},e.deleteAllVisibleHandler=function(){confirm("Really delete all visible images?")&&(e.state.faceGroupingImages.forEach((function(e){se("delete",e.file).then((function(){return null}))})),e.setState({faceGroupingImages:[]}),e.loadFaceGroupingImages().then((function(){return null})))},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.loadFaceGroupingImages().then((function(){return null}))}},{key:"loadFaceGroupingImages",value:function(){var e=Object(H.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie();case 2:t=e.sent,this.setState({isLoading:!1,faceGroupingNames:t.names,faceGroupingImages:t.images});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[],a=[];return void 0!==this.state.faceGroupingImages&&this.state.faceGroupingImages.length>0&&(t=this.state.faceGroupingImages.map((function(t){return r.a.createElement("img",{id:t.file,title:t.title,className:"CursorPointer mr-1 ml-1 mt-1 magictime spaceInLeft",style:{maxHeight:"120px",maxWidth:"120px",width:"auto",height:"auto"},key:t.file,src:t.image,alt:t.file,onClick:function(){return e.faceGroupingFaceImageClickHandler(t.file)}})}))),this.state.faceGroupingNames.length>0&&(a=this.state.faceGroupingNames.map((function(t){return r.a.createElement("div",{key:String(t)},r.a.createElement(fe.a,{onClick:Object(H.a)(R.a.mark((function a(){return R.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.moveFaceGroupingImageHandler(String(t));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a)}))),variant:"outline-secondary",size:"sm",className:"m-1"},t))}))).push(r.a.createElement("div",{key:"delete"},r.a.createElement(fe.a,{onClick:Object(H.a)(R.a.mark((function t(){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.moveFaceGroupingImageHandler("delete");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),variant:"outline-danger",size:"sm",className:"m-1"},"delete"))),r.a.createElement("div",null,r.a.createElement("div",{className:"magictime vanishIn"},r.a.createElement(A.a,{bg:"Light",text:"dark"},r.a.createElement(A.a.Header,null,r.a.createElement("b",null,"Person grouping and training")),r.a.createElement(A.a.Body,{className:"d-flex flex-column align-items-center",style:{padding:"5px"}},r.a.createElement("div",{className:"d-flex flex-wrap mt-2 mb-2"},t),this.state.isLoading?r.a.createElement(S,{isDark:!0}):null,r.a.createElement("small",{className:"mb-1 text-muted"},"Click image and then select who is in the image. This is used for training."),r.a.createElement("div",{className:"d-flex flex-wrap mt-2 mb-4"},this.state.showNames?a:null),r.a.createElement(ze.a,null,r.a.createElement(Qe.a,{md:"auto"},r.a.createElement(fe.a,{onClick:Object(H.a)(R.a.mark((function t(){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.trainModelHandler();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),variant:"secondary",size:"sm"},"Train model")),r.a.createElement(Qe.a,{md:"auto"},r.a.createElement(fe.a,{onClick:function(){return e.loadMoreHandler()},variant:"secondary",size:"sm"},"Load more")),r.a.createElement(Qe.a,{md:"auto"},r.a.createElement(fe.a,{onClick:function(){return e.deleteAllVisibleHandler()},variant:"danger",size:"sm"},"Delete all visible")))))))}},{key:"moveFaceGroupingImageHandler",value:function(){var e=Object(H.a)(R.a.mark((function e(t){var a=this;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(t,this.state.loadedFile);case 2:this.setState({showNames:!1,faceGroupingImages:this.state.faceGroupingImages.filter((function(e){return e.file!==a.state.loadedFile}))});case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"trainModelHandler",value:function(){var e=Object(H.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm("Send train face model training action?")){e.next=5;break}return e.next=3,ue();case 3:t=e.sent,alert(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),a}(n.Component),qe=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"mt-2 mr-2 ml-2"},r.a.createElement(Ke,null)),r.a.createElement("div",{className:"mt-2 mr-2 ml-2"},r.a.createElement(Je,null)))}}]),a}(n.Component),Ze=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=[E.a.Cameras],t=this.props.isAuthenticated?r.a.createElement("div",null,r.a.createElement(g,null),r.a.createElement("div",{className:e.join(" "),style:{paddingBottom:"80px"}},r.a.createElement(f.c,null,r.a.createElement(f.a,{exact:!0,path:"/",component:He}),r.a.createElement(f.a,{exact:!0,path:"/cameras",component:j}),r.a.createElement(f.a,{exact:!0,path:"/plates",component:Xe}),r.a.createElement(f.a,{exact:!0,path:"/faces",component:Ae}),r.a.createElement(f.a,{exact:!0,path:"/training",component:qe})))):r.a.createElement("div",{className:e.join(" ")},r.a.createElement("h1",{className:"m-2",style:{color:"white"}},"Login not implemented"),r.a.createElement("small",{className:"m-2",style:{color:"white"}},"You should not see this yet"));return r.a.createElement("div",{className:"App"},t)}}]),a}(n.Component),$e=Object(w.b)((function(e){return{isAuthenticated:null!==e.authReducer.token}}),(function(e){return{onTryAutoSignup:function(){return e(D())}}}))(Ze);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(237),a(238);var et=a(33),tt=_e(),at={selectedDate:tt,dateRangeStartDate:Pe(tt,-7),dateRangeEndDate:tt},nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SELECTED_DATE":return Object(Le.a)(Object(Le.a)({},e),{selectedDate:t.selectedDate});case"INCREMENT_DAY":case"DECREMENT_DAY":return Object(Le.a)(Object(Le.a)({},e),{selectedDate:Pe(e.selectedDate,t.days)});case"CALENDAR_SELECTION":return Object(Le.a)(Object(Le.a)({},e),{selectedDate:t.calendar.target.value});case"DATE_RANGE_START_DATE_SELECTED":return Object(Le.a)(Object(Le.a)({},e),{dateRangeStartDate:t.calendar.target.value});case"DATE_RANGE_END_DATE_SELECTED":return Object(Le.a)(Object(Le.a)({},e),{dateRangeEndDate:t.calendar.target.value});default:return e}},rt={token:"dummy-place-holder",userId:null,error:null,loading:!1,authRedirectPath:"/"},lt=function(e,t){return ut(e,{error:null,loading:!0})},it=function(e,t){return ut(e,{token:t.idToken,userId:t.userId,error:null,loading:!1})},ct=function(e,t){return ut(e,{error:t.error,loading:!1})},st=function(e,t){return ut(e,{token:null,userId:null})},ot=function(e,t){return ut(e,{authRedirectPath:t.path})},ut=function(e,t){return Object(Le.a)(Object(Le.a)({},e),t)},dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return lt(e);case"AUTH_SUCCESS":return it(e,t);case"AUTH_FAIL":return ct(e,t);case"AUTH_LOGOUT":return st(e);case"SET_AUTH_REDIRECT_PATH":return ot(e,t);default:return e}},mt=a(105),pt=Object(et.combineReducers)({dateReducer:nt,authReducer:dt}),ht=Object(et.createStore)(pt,Object(mt.composeWithDevTools)(Object(et.applyMiddleware)()));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w.a,{store:ht},r.a.createElement(h.a,null,r.a.createElement($e,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},53:function(e,t,a){e.exports={NavbarBrand:"Navbar_NavbarBrand__331oC",Link:"Navbar_Link__2xgcF"}},95:function(e,t,a){e.exports={Cameras:"Cameras_Cameras__9f3Tt"}},98:function(e,t,a){e.exports={SpinnerDiv:"LoadingIndicator_SpinnerDiv__NFW36"}}},[[110,1,2]]]);
//# sourceMappingURL=main.f1ed4eb4.chunk.js.map