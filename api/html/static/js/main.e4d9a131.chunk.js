(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{108:function(e,t,a){e.exports=a(237)},113:function(e,t,a){},114:function(e,t,a){},236:function(e,t,a){},237:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(21),s=a.n(i),l=(a(113),a(114),a(8)),c=a(9),o=a(11),u=a(10),d=a(243),m=a(53),h=a.n(m),p=a(28),g=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={activeLink:"/"},e.setActiveLinkHandler=function(t){e.setState({activeLink:t})},e.setCurrentPath=function(){try{var t=window.location.href.split("/"),a="/"+t[t.length-1];console.log(a),e.setState({activeLink:a})}catch(n){console.error(n)}},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.setCurrentPath()}},{key:"render",value:function(){var e=this,t=["nav-link",h.a.Link];return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{bg:"dark",variant:"dark",expand:"lg"},r.a.createElement(d.a.Brand,{className:h.a.NavbarBrand},r.a.createElement("img",{alt:"Open-Intelligence Logo",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAACHklEQVR4Ae3WAWTjUBjA8UNRFMVQFMUwHIahCI7hMBTFUBTDYQiG4RAUBRSHAIaiKIrhAFAURVAURREERVAMRe+PfTzP+faSJsy2Pz9M0rcvSdPk26foq+PxeIkBZlhi+2qOKR5xXvYQVfiI4doa/TKG6WCDvEXwihpmALsdntBFG61XHnqYYA+zA+5OGaSCKcwS3KPieIkDpDAb5h1oCLNn1HOs08QCZndZF7mF2QiVE2+IqXX5vCwfTiDNCrxLF5Ai1w8GkLaoFXi3NpFC6r99FMoH+PsBEUK0lHW+Y4IF+soBr98a6BrSxtrWhlmorPMX0gFN66D3kM61gUJIQ2ubD7OVsk4Ks661fQLpURtoCcmztjVwgPSgrPMH0g5Va3sP0lQbKIYkp9keykfb4Qv8E79Q/882D9JcW4SISn5QtyBt38NATUixtmMCqVHiQG1IC23HCNJViQN1Ic20HZ8gBcoPWtZ6+v/RX8SkyNpWR4ysLezXGuwgXWoD1fAC6ca+XbGHawkurDXuIcUu13cEaYWK/YLveKbWaNlnGQkk32WgOlJIofLCn8Auxm9U7UuFZ0gb/R1Lf275yr5n8PADFw5nXupkvTXHMAv1I1K/lzOYBXnf8OYwW+Emwxp9bGE2OfW1cwy7CAGu0LAeCR6G2MBuUNQvq48UeUtwW/TP/RlGeIFrKQJUy3xS19DBGBF2kGIsEeJaBvnqQ/cPDxGlXpRi3oIAAAAASUVORK5CYII=",width:"36",height:"36",className:"d-inline-block align-top"})," ",r.a.createElement("span",{className:h.a.NavbarBrand},"Open-Intelligence")),r.a.createElement(d.a.Toggle,{"aria-controls":"navbarSupportedContent"}),r.a.createElement(d.a.Collapse,{id:"navbarSupportedContent"},"/"!==this.state.activeLink?r.a.createElement(p.b,{className:t.join(" "),to:"/",onClick:function(){return e.setActiveLinkHandler("/")}},"Home"):r.a.createElement("span",null,"Home"),"/cameras"!==this.state.activeLink?r.a.createElement(p.b,{className:t.join(" "),to:"/cameras",onClick:function(){return e.setActiveLinkHandler("/cameras")}},"Cameras"):r.a.createElement("span",null,"Cameras"),"/plates"!==this.state.activeLink?r.a.createElement(p.b,{className:t.join(" "),to:"/plates",onClick:function(){return e.setActiveLinkHandler("/plates")}},"Plates"):r.a.createElement("span",null,"Plates"),"/faces"!==this.state.activeLink?r.a.createElement(p.b,{className:t.join(" "),to:"/faces",onClick:function(){return e.setActiveLinkHandler("/faces")}},"Faces"):r.a.createElement("span",null,"Faces"),"/training"!==this.state.activeLink?r.a.createElement(p.b,{className:t.join(" "),to:"/training",onClick:function(){return e.setActiveLinkHandler("/training")}},"Training"):r.a.createElement("span",null,"Training"))))}}]),a}(n.Component),f=a(13),v=a(95),E=a.n(v),b=a(96),D=a.n(b).a.create({}),y=a(239),I=a(97),k=a.n(I),w=function(e){return r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(y.a,{animation:"grow",variant:e.isDark?"dark":"light",className:k.a.SpinnerDiv}))},C=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e))._isMounted=void 0,n.state={windowWidth:window.innerWidth,imageData:[],intervalId:0,isLoading:!0},n.loadCameraImages=function(){D.post("http://192.168.2.35:4300/get/latest/camera/images").then((function(e){n._isMounted&&n.setState({imageData:e.data.images,isLoading:!1})})).catch((function(e){console.error(e)}))},n.handleResize=function(){n.setState({windowWidth:window.innerWidth})},n._isMounted=!1,n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,window.addEventListener("resize",this.handleResize),this.loadCameraImages();var t=setInterval((function(){return e.loadCameraImages()}),6e4);this.setState({intervalId:t})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.intervalId),this._isMounted=!1,window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e=[r.a.createElement("div",{key:"null"})],t=this.state.windowWidth/2,a=50*t/100;return void 0!==this.state.imageData&&this.state.imageData.length>0&&(e=this.state.imageData.map((function(e){return r.a.createElement("img",{id:e.id,title:e.name+" "+new Date(e.file_create_date).toDateString(),className:"CursorPointer magictime vanishIn",style:{width:t,height:a},key:e.id,src:e.image,alt:e.file_name})}))),r.a.createElement("div",null,r.a.createElement("div",{className:["d-flex","justify-content-center","flex-wrap"].join(" ")},e),this.state.isLoading?r.a.createElement(w,null):null)}}]),a}(n.Component),O=a(5),j=a.n(O),N=a(12),S=a(244),x=a(240);function M(e){return R.apply(this,arguments)}function R(){return(R=Object(N.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.next=3,D.post("http://192.168.2.35:4300/get/object/detection/image/for/cropped/image",{croppedImageName:t});case 3:return n=e.sent,a.file_name=n.data.file_name,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return L.apply(this,arguments)}function L(){return(L=Object(N.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a={}).file_name=t,e.next=4,D.post("http://192.168.2.35:4300/get/object/detection/image",{objectDetectionImageFileName:t});case 4:return n=e.sent,a.data=n.data.data,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return H.apply(this,arguments)}function H(){return(H=Object(N.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.post("http://192.168.2.35:4300/get/intelligence",{selectedDate:t});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t){return B.apply(this,arguments)}function B(){return(B=Object(N.a)(j.a.mark((function e(t,a){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.post("http://192.168.2.35:4300/get/label/images",{selectedDate:t,label:a});case 2:return n=e.sent,e.abrupt("return",n.data.images);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t){return U.apply(this,arguments)}function U(){return(U=Object(N.a)(j.a.mark((function e(t,a){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.post("http://192.168.2.35:4300/get/super/resolution/image",{label:t,imageFile:a});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return G.apply(this,arguments)}function G(){return(G=Object(N.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.get("http://192.168.2.35:4300/get/instance/details");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t){return Q.apply(this,arguments)}function Q(){return(Q=Object(N.a)(j.a.mark((function e(t,a){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.post("http://192.168.2.35:4300/get/calendar/events",{dateRangeStartDate:t,dateRangeEndDate:a});case 2:return n=e.sent,e.abrupt("return",n.data.events);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Y=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={instances:[]},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.loadInstanceDetails().then((function(){return null}))}},{key:"loadInstanceDetails",value:function(){var e=Object(N.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:t=e.sent,this.setState({instances:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=[];return void 0!==this.state.instances&&this.state.instances.length>0&&(e=this.state.instances.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.process_name),r.a.createElement("td",null,e.updatedAt),r.a.createElement("td",null,e.createdAt))}))),r.a.createElement("div",null,r.a.createElement(S.a,{bg:"dark",text:"light"},r.a.createElement(S.a.Header,null,"Running instances"),r.a.createElement(S.a.Body,{style:{padding:"0px"}},r.a.createElement(x.a,{striped:!0,bordered:!0,hover:!0,variant:"dark"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Process"),r.a.createElement("th",null,"Alive check"),r.a.createElement("th",null,"Started"))),r.a.createElement("tbody",null,e)))))}}]),a}(n.Component),V=a(241),X=a(98),K=a(16),z=a(242),J=a(245),q=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(z.a,{size:"lg",show:e.show,onHide:e.closeHandler()},r.a.createElement(z.a.Header,{closeButton:!0},r.a.createElement(z.a.Title,null,r.a.createElement("h5",null,e.title))),r.a.createElement(z.a.Body,null,"s",r.a.createElement("p",{className:"text-muted mb-2"},e.description),e.showBadges?r.a.createElement("div",{className:"d-flex flex-row bd-highlight mb-2"},r.a.createElement("div",{className:"bd-highlight"},r.a.createElement("span",{className:"badge badge-warning"},e.srImage?"SR version":"Normal version")),r.a.createElement("div",{className:"ml-2 bd-highlight"},r.a.createElement("span",{className:"badge badge-info"},e.detectionResult)),r.a.createElement("div",{className:"ml-2 bd-highlight"},r.a.createElement("span",{className:"badge badge-secondary"},e.color)),r.a.createElement("div",{className:"ml-2 bd-highlight"},r.a.createElement("span",{className:"badge badge-dark"},e.additionalInfo))):null,r.a.createElement("img",{className:"card-img-right",style:{width:"100%",height:"100%"},alt:"genericModalImage",src:e.src})),r.a.createElement(z.a.Footer,null,r.a.createElement(J.a,{variant:"secondary",onClick:e.closeHandler()},"Close"))))},Z=null,$=!1,ee=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={selectedDate:null,isLoading:!0,labelSelection:null,instanceCount:0,storageUse:"N/A GB",labelDonutData:{},labelImages:[],genericImageModalData:{show:!1}},e.onDonutElementClickHandler=function(t){if(void 0!==t&&t.length>0){var a=t[0]._index,n=e.state.labelDonutData.labels[a];e.setState({isLoading:!0,labelSelection:n}),e.loadLabelImagesHandler(e.props.selectedDate,n).then((function(){return null}))}},e.genericImageModalCloseHandler=function(){e.setState({genericImageModalData:{show:!1}})},e.handleLabelMouseDown=function(t){Z=setTimeout((function(){console.log("Mouse long click run"),e.labelImageClickHandler(t,!0).then((function(){return null})),$=!0}),1e3)},e.handleLabelMouseUp=function(t){clearTimeout(Z),$||(console.log("Mouse short click run"),e.labelImageClickHandler(t,!1).then((function(){return null}))),$=!1},e}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){this.state.selectedDate!==this.props.selectedDate&&this.loadIntelligence(this.props.selectedDate).then((function(){return null}))}},{key:"componentDidMount",value:function(){this.loadIntelligence(this.props.selectedDate).then((function(){return null}))}},{key:"loadIntelligence",value:function(){var e=Object(N.a)(j.a.mark((function e(t){var a,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t);case 2:a=e.sent,(n={}).labels=[],n.datasets=[],r={data:[],backgroundColor:[],hoverBackgroundColor:[]},a.donut.forEach((function(e){n.labels.push(e.label),r.data.push(e.value),r.backgroundColor.push("#13697d"),r.hoverBackgroundColor.push("#1698af")})),n.datasets.push(r),this.setState({selectedDate:t,isLoading:!1,instanceCount:a.performance.instanceCount,storageUse:a.performance.storageUse,labelDonutData:n});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadLabelImagesHandler",value:function(){var e=Object(N.a)(j.a.mark((function e(t,a){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t,a);case 2:n=e.sent,this.setState({isLoading:!1,labelImages:n});case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"labelImageClickHandler",value:function(){var e=Object(N.a)(j.a.mark((function e(t,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({isLoading:!0}),a?this.loadObjectDetectionImageHandler(t).then((function(){return null})):this.loadSuperResolutionImage(t).then((function(){return null}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"loadObjectDetectionImageHandler",value:function(){var e=Object(N.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.next=3,M(t);case 3:return a=e.sent,e.next=6,A(a.file_name);case 6:n=e.sent,this.setState({isLoading:!1,genericImageModalData:{show:!0,title:n.file_name,description:"Full object detection image for selected label where label is originating",src:n.data}});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadSuperResolutionImage",value:function(){var e=Object(N.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.next=3,F(this.state.labelSelection||"",t);case 3:a=e.sent,this.setState({isLoading:!1,genericImageModalData:{show:!0,title:t,description:a.srImage?"This is processed super resolution image":"This is standard image",src:a.data,showBadges:!0,srImage:a.srImage,detectionResult:a.detectionResult,color:a.color}});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];return void 0!==this.state.labelImages&&this.state.labelImages.length>0&&(t=this.state.labelImages.map((function(t){return r.a.createElement("div",{onMouseDown:function(){return e.handleLabelMouseDown(t.file)},onMouseUp:function(){return e.handleLabelMouseUp(t.file)},key:t.file},r.a.createElement("img",{id:t.file,title:t.title,className:"CursorPointer mr-1 ml-1 mt-1 magictime vanishIn",style:{maxHeight:"120px",maxWidth:"120px",width:"auto",height:"auto"},key:t.file,src:t.image,alt:t.file}))}))),r.a.createElement("div",null,r.a.createElement(S.a,{bg:"Light",text:"dark"},r.a.createElement(S.a.Header,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement("b",null,"Label viewer")),r.a.createElement("div",{className:"col-sm text-right"},r.a.createElement(V.a,{variant:"dark",className:"mr-2"},"IC",this.state.instanceCount),r.a.createElement(V.a,{variant:"dark"},"STR ",this.state.storageUse)))),r.a.createElement(S.a.Body,null,r.a.createElement("div",{style:{height:"300px"}},void 0!==this.state.labelDonutData.datasets?r.a.createElement(X.Doughnut,{onElementsClick:function(t){return e.onDonutElementClickHandler(t)},data:this.state.labelDonutData,height:300,options:{maintainAspectRatio:!1}}):this.state.isLoading?r.a.createElement(w,{isDark:!0}):null),r.a.createElement("div",{className:"d-flex justify-content-center flex-wrap mt-4"},t)),r.a.createElement(S.a.Footer,null,r.a.createElement("small",{className:"text-muted"},null===this.state.labelSelection?"No label selected":"Selected "+this.state.labelSelection+" label"))),this.state.isLoading?r.a.createElement(w,{isDark:!1}):null,r.a.createElement(q,{closeHandler:function(){return e.genericImageModalCloseHandler},show:this.state.genericImageModalData.show,description:this.state.genericImageModalData.description,src:this.state.genericImageModalData.src,title:this.state.genericImageModalData.title,showBadges:this.state.genericImageModalData.showBadges,srImage:this.state.genericImageModalData.srImage,detectionResult:this.state.genericImageModalData.detectionResult,color:this.state.genericImageModalData.color,additionalInfo:this.state.genericImageModalData.additionalInfo}))}}]),a}(n.Component),te=Object(K.b)((function(e){return{selectedDate:e.selectedDate}}))(ee),ae=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:""},r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},"Selected day")),r.a.createElement("input",{id:"selected_day_field",type:"date",className:"form-control",placeholder:"Change day","aria-label":"Day change",value:this.props.selectedDate,onChange:function(t){return e.props.onDateSelected(t)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-outline-info",type:"button",onClick:this.props.onDecrementDay},"\u2190 Earlier"),r.a.createElement("button",{className:"btn btn-outline-info",type:"button",onClick:this.props.onIncrementDay},"Next \u2192")))))}}]),a}(n.Component),ne=Object(K.b)((function(e){return{selectedDate:e.selectedDate}}),(function(e){return{onIncrementDay:function(){return e({type:"INCREMENT_DAY",days:1})},onDecrementDay:function(){return e({type:"DECREMENT_DAY",days:-1})},onDateSelected:function(t){return e({type:"CALENDAR_SELECTION",calendar:t})}}}))(ae),re=a(105),ie=a(51),se=a(106),le=a(107),ce=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},"Day's between")),r.a.createElement("input",{type:"date",className:"form-control",placeholder:"Change day","aria-label":"Day change",value:this.props.dateRangeStartDate,onChange:function(t){return e.props.onDateRangeStartDateSelected(t)}}),r.a.createElement("input",{type:"date",className:"form-control",placeholder:"Change day","aria-label":"Day change",value:this.props.dateRangeEndDate,onChange:function(t){return e.props.onDateRangeEndDateSelected(t)}})))}}]),a}(n.Component),oe=Object(K.b)((function(e){return{dateRangeStartDate:e.dateRangeStartDate,dateRangeEndDate:e.dateRangeEndDate}}),(function(e){return{onDateRangeStartDateSelected:function(t){return e({type:"DATE_RANGE_START_DATE_SELECTED",calendar:t})},onDateRangeEndDateSelected:function(t){return e({type:"DATE_RANGE_END_DATE_SELECTED",calendar:t})}}}))(ce),ue=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={dateRangeStartDate:null,dateRangeEndDate:null,calendarWeekends:!0,calendarEvents:[],genericImageModalData:{show:!1}},e.calendarComponentRef=r.a.createRef(),e.handleDateClick=function(e){},e.handleEventClick=function(t){var a=t.event.title,n=t.event.extendedProps.file_name_cropped,r=t.event.extendedProps.description;e.loadObjectDetectionImageHandler(n,a,r).then((function(){return null}))},e.genericImageModalCloseHandler=function(){e.setState({genericImageModalData:{show:!1}})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.loadCalendarEvents().then((function(){return null}))}},{key:"componentDidUpdate",value:function(e,t,a){this.state.dateRangeStartDate===this.props.dateRangeStartDate&&this.state.dateRangeEndDate===this.props.dateRangeEndDate||this.loadCalendarEvents().then((function(){return null}))}},{key:"loadCalendarEvents",value:function(){var e=Object(N.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(this.props.dateRangeStartDate,this.props.dateRangeEndDate);case 2:t=e.sent,this.setState({calendarEvents:t,dateRangeStartDate:this.props.dateRangeStartDate,dateRangeEndDate:this.props.dateRangeEndDate});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(S.a,{bg:"Light",text:"dark"},r.a.createElement(S.a.Header,null,r.a.createElement("b",null,"Vehicle activity")),r.a.createElement(S.a.Body,null,r.a.createElement("div",null,r.a.createElement(oe,this.props),r.a.createElement(re.a,{plugins:[ie.b,se.a,le.a],ref:this.calendarComponentRef,weekends:this.state.calendarWeekends,events:this.state.calendarEvents,dateClick:this.handleDateClick,eventClick:this.handleEventClick,headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},initialView:"timeGridWeek",height:600})))),r.a.createElement(q,{closeHandler:function(){return e.genericImageModalCloseHandler},show:this.state.genericImageModalData.show,description:this.state.genericImageModalData.description,src:this.state.genericImageModalData.src,title:this.state.genericImageModalData.title,showBadges:this.state.genericImageModalData.showBadges,srImage:this.state.genericImageModalData.srImage,detectionResult:this.state.genericImageModalData.detectionResult,color:this.state.genericImageModalData.color,additionalInfo:this.state.genericImageModalData.additionalInfo}))}},{key:"loadObjectDetectionImageHandler",value:function(){var e=Object(N.a)(j.a.mark((function e(t,a,n){var r,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.next=3,M(t);case 3:return r=e.sent,e.next=6,A(r.file_name);case 6:i=e.sent,this.setState({isLoading:!1,genericImageModalData:{show:!0,title:i.file_name,description:"Original image file where selected calendar event license plate is seen",src:i.data,showBadges:!0,detectionResult:a,additionalInfo:n}});case 8:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()}]),a}(n.Component),de=Object(K.b)((function(e){return{dateRangeStartDate:e.dateRangeStartDate,dateRangeEndDate:e.dateRangeEndDate}}))(ue),me=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"mt-2 mr-2 ml-2"},r.a.createElement(ne,this.props)),r.a.createElement("div",{className:"mt-2 mr-2 ml-2"},r.a.createElement(te,this.props)),r.a.createElement("div",{className:"mt-2 mr-2 ml-2"},r.a.createElement(de,this.props)),r.a.createElement("div",{className:"mt-2 mr-2 ml-2"},r.a.createElement(Y,null)))}}]),a}(n.Component),he=Object(K.b)((function(e){return{selectedDate:e.selectedDate}}))(me),pe=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e))._isMounted=void 0,n.state={selectedDay:(new Date).toISOString().substr(0,10),faceImages:[],intervalId:0,genericImageModalData:{show:!1},isLoading:!0},n.loadEarlierDayHandler=function(){var e=new Date(n.state.selectedDay);e.setDate(e.getDate()-1);var t=e.toISOString().substr(0,10);n.setSelectedDay(t)},n.loadNextDayHandler=function(){var e=new Date(n.state.selectedDay);e.setDate(e.getDate()+1);var t=e.toISOString().substr(0,10);n.setSelectedDay(t)},n.setSelectedDay=function(e){n.setState({selectedDay:e}),n.loadFaceImages(e)},n.loadFaceImages=function(e){D.post("http://192.168.2.35:4300/get/faces/for/day",{selectedDate:e}).then((function(e){n._isMounted&&n.setState({faceImages:n.removeDuplicates(e.data.images),isLoading:!1})})).catch((function(e){console.error(e)}))},n.removeDuplicates=function(e){return e.filter((function(e,t,a){return a.findIndex((function(t){return t.file===e.file}))===t}))},n.genericImageModalCloseHandler=function(){n.setState({genericImageModalData:{show:!1}})},n._isMounted=!1,n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.loadFaceImages(this.state.selectedDay);var t=setInterval((function(){return e.loadFaceImages(e.state.selectedDay)}),6e4);this.setState({intervalId:t})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.intervalId),this._isMounted=!1}},{key:"loadObjectDetectionImageHandler",value:function(){var e=Object(N.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.next=3,M(t);case 3:return a=e.sent,e.next=6,A(a.file_name);case 6:n=e.sent,this.setState({isLoading:!1,genericImageModalData:{show:!0,title:n.file_name,description:"Original image file where face is detected",src:n.data,showBadges:!1}});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];return void 0!==this.state.faceImages&&this.state.faceImages.length>0&&(t=this.state.faceImages.map((function(t){return r.a.createElement("img",{id:t.file,title:t.title,className:"CursorPointer mr-1 ml-1 mt-1 magictime spaceInLeft",style:{maxHeight:"120px",maxWidth:"120px"},key:t.file,src:t.image,alt:t.file,onClick:Object(N.a)(j.a.mark((function a(){return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.loadObjectDetectionImageHandler(t.file);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a)})))})}))),r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex justify-content-center flex-wrap mb-2 magictime spaceInLeft"},r.a.createElement("div",{className:"input-group mb-2",style:{maxWidth:"300px"}},r.a.createElement("input",{type:"text",style:{backgroundColor:"#343a40",color:"#999999"},disabled:!0,className:"form-control",value:this.state.selectedDay}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-outline-info",type:"button",onClick:this.loadEarlierDayHandler},"\u2190 Earlier"),r.a.createElement("button",{className:"btn btn-outline-info",type:"button",onClick:this.loadNextDayHandler},"Next \u2192")))),r.a.createElement("div",{className:"d-flex justify-content-center flex-wrap"},t),r.a.createElement(q,{closeHandler:function(){return e.genericImageModalCloseHandler},show:this.state.genericImageModalData.show,description:this.state.genericImageModalData.description,src:this.state.genericImageModalData.src,title:this.state.genericImageModalData.title,showBadges:this.state.genericImageModalData.showBadges,srImage:this.state.genericImageModalData.srImage,detectionResult:this.state.genericImageModalData.detectionResult,color:this.state.genericImageModalData.color,additionalInfo:this.state.genericImageModalData.additionalInfo}),this.state.isLoading?r.a.createElement(w,{isDark:!1}):null)}}]),a}(n.Component),ge=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,"Date range selector component and Cars view")}}]),a}(n.Component),fe=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,"Vehicle owner connections (license plate + Owner name)")}}]),a}(n.Component),ve=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"mt-2 mr-2 ml-2"},r.a.createElement(ge,this.props)),r.a.createElement("div",{className:"mt-2 mr-2 ml-2"},r.a.createElement(fe,this.props)))}}]),a}(n.Component),Ee=Object(K.b)((function(e){return{}}))(ve);var be=function(){var e=[E.a.Cameras];return r.a.createElement("div",{className:"App"},r.a.createElement(g,null),r.a.createElement("div",{className:e.join(" "),style:{paddingBottom:"80px"}},r.a.createElement(f.c,null,r.a.createElement(f.a,{exact:!0,path:"/",component:he}),r.a.createElement(f.a,{exact:!0,path:"/cameras",component:C}),r.a.createElement(f.a,{exact:!0,path:"/plates",component:Ee}),r.a.createElement(f.a,{exact:!0,path:"/faces",component:pe}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(235),a(236);var De=a(50),ye=a(20),Ie=function(e,t){var a=new Date(e);return a.setDate(a.getDate()+t),a.toISOString().substr(0,10)},ke=(new Date).toISOString().substr(0,10),we={selectedDate:ke,dateRangeStartDate:Ie(ke,-7),dateRangeEndDate:ke},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SELECTED_DATE":return Object(ye.a)(Object(ye.a)({},e),{selectedDate:t.selectedDate});case"INCREMENT_DAY":case"DECREMENT_DAY":return Object(ye.a)(Object(ye.a)({},e),{selectedDate:Ie(e.selectedDate,t.days)});case"CALENDAR_SELECTION":return Object(ye.a)(Object(ye.a)({},e),{selectedDate:t.calendar.target.value});case"DATE_RANGE_START_DATE_SELECTED":return Object(ye.a)(Object(ye.a)({},e),{dateRangeStartDate:t.calendar.target.value});case"DATE_RANGE_END_DATE_SELECTED":return Object(ye.a)(Object(ye.a)({},e),{dateRangeEndDate:t.calendar.target.value});default:return e}},Oe=Object(De.b)(Ce);s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(K.a,{store:Oe},r.a.createElement(p.a,null,r.a.createElement(be,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},53:function(e,t,a){e.exports={NavbarBrand:"Navbar_NavbarBrand__331oC",Link:"Navbar_Link__2xgcF"}},95:function(e,t,a){e.exports={Cameras:"Cameras_Cameras__9f3Tt"}},97:function(e,t,a){e.exports={SpinnerDiv:"LoadingIndicator_SpinnerDiv__NFW36"}}},[[108,1,2]]]);
//# sourceMappingURL=main.e4d9a131.chunk.js.map